(function(b){b.isScrollToFixed=function(a){return !!b(a).data("ScrollToFixed")};b.ScrollToFixed=function(al,ag){var ad=this;ad.$el=b(al);ad.el=al;ad.$el.data("ScrollToFixed",ad);var am=false;var N=ad.$el;var L;var Q;var ak;var I;var T=0;var X=0;var af=-1;var aj=-1;var R=null;var a;var ai;function P(){N.trigger("preUnfixed.ScrollToFixed");ae();N.trigger("unfixed.ScrollToFixed");aj=-1;T=N.offset().top;X=N.offset().left;if(ad.options.offsets){X+=(N.offset().left-N.position().left)}if(af==-1){af=X}L=N.css("position");am=true;if(ad.options.bottom!=-1){N.trigger("preFixed.ScrollToFixed");K();N.trigger("fixed.ScrollToFixed")}}function ab(){var c=ad.options.limit;if(!c){return 0}if(typeof(c)==="function"){return c.apply(N)}return c}function Z(){return L==="fixed"}function J(){return L==="absolute"}function ah(){return !(Z()||J())}function K(){if(!Z()){R.css({display:N.css("display"),width:N.outerWidth(true),height:N.outerHeight(true),"float":N.css("float")});cssOptions={"z-index":ad.options.zIndex,position:"fixed",top:ad.options.bottom==-1?S():"",bottom:ad.options.bottom==-1?"":ad.options.bottom,"margin-left":"0px"};if(!ad.options.dontSetWidth){cssOptions.width=N.width()}N.css(cssOptions);N.addClass(ad.options.baseClassName);if(ad.options.className){N.addClass(ad.options.className)}L="fixed"}}function an(){var c=ab();var d=X;if(ad.options.removeOffsets){d="";c=c-T}cssOptions={position:"absolute",top:c,left:d,"margin-left":"0px",bottom:""};if(!ad.options.dontSetWidth){cssOptions.width=N.width()}N.css(cssOptions);L="absolute"}function ae(){if(!ah()){aj=-1;R.css("display","none");N.css({"z-index":I,width:"",position:Q,left:"",top:ak,"margin-left":""});N.removeClass("scroll-to-fixed-fixed");if(ad.options.className){N.removeClass(ad.options.className)}L=null}}function M(c){if(c!=aj){N.css("left",X-c);aj=c}}function S(){var c=ad.options.marginTop;if(!c){return 0}if(typeof(c)==="function"){return c.apply(N)}return c}function Y(){if(!b.isScrollToFixed(N)){return}var d=am;if(!am){P()}else{if(ah()){T=N.offset().top;X=N.offset().left}}var f=b(window).scrollLeft();var c=b(window).scrollTop();var e=ab();if(ad.options.minWidth&&b(window).width()<ad.options.minWidth){if(!ah()||!d){aa();N.trigger("preUnfixed.ScrollToFixed");ae();N.trigger("unfixed.ScrollToFixed")}}else{if(ad.options.maxWidth&&b(window).width()>ad.options.maxWidth){if(!ah()||!d){aa();N.trigger("preUnfixed.ScrollToFixed");ae();N.trigger("unfixed.ScrollToFixed")}}else{if(ad.options.bottom==-1){if(e>0&&c>=e-S()){if(!J()||!d){aa();N.trigger("preAbsolute.ScrollToFixed");an();N.trigger("unfixed.ScrollToFixed")}}else{if(c>=T-S()){if(!Z()||!d){aa();N.trigger("preFixed.ScrollToFixed");K();aj=-1;N.trigger("fixed.ScrollToFixed")}M(f)}else{if(!ah()||!d){aa();N.trigger("preUnfixed.ScrollToFixed");ae();N.trigger("unfixed.ScrollToFixed")}}}}else{if(e>0){if(c+b(window).height()-N.outerHeight(true)>=e-(S()||-ac())){if(Z()){aa();N.trigger("preUnfixed.ScrollToFixed");if(Q==="absolute"){an()}else{ae()}N.trigger("unfixed.ScrollToFixed")}}else{if(!Z()){aa();N.trigger("preFixed.ScrollToFixed");K()}M(f);N.trigger("fixed.ScrollToFixed")}}else{M(f)}}}}}function ac(){if(!ad.options.bottom){return 0}return ad.options.bottom}function aa(){var c=N.css("position");if(c=="absolute"){N.trigger("postAbsolute.ScrollToFixed")}else{if(c=="fixed"){N.trigger("postFixed.ScrollToFixed")}else{N.trigger("postUnfixed.ScrollToFixed")}}}var V=function(c){if(N.is(":visible")){am=false;Y()}};var O=function(c){(!!window.requestAnimationFrame)?requestAnimationFrame(Y):Y()};var W=function(){var e=document.body;if(document.createElement&&e&&e.appendChild&&e.removeChild){var c=document.createElement("div");if(!c.getBoundingClientRect){return null}c.innerHTML="x";c.style.cssText="position:fixed;top:100px;";e.appendChild(c);var h=e.style.height,g=e.scrollTop;e.style.height="3000px";e.scrollTop=500;var f=c.getBoundingClientRect().top;e.style.height=h;var d=(f===100);e.removeChild(c);e.scrollTop=g;return d}return null};var U=function(c){c=c||window.event;if(c.preventDefault){c.preventDefault()}c.returnValue=false};ad.init=function(){ad.options=b.extend({},b.ScrollToFixed.defaultOptions,ag);I=N.css("z-index");ad.$el.css("z-index",ad.options.zIndex);R=b("<div />");L=N.css("position");Q=N.css("position");ak=N.css("top");if(ah()){ad.$el.after(R)}b(window).bind("resize.ScrollToFixed",V);b(window).bind("scroll.ScrollToFixed",O);if("ontouchmove" in window){b(window).bind("touchmove.ScrollToFixed",Y)}if(ad.options.preFixed){N.bind("preFixed.ScrollToFixed",ad.options.preFixed)}if(ad.options.postFixed){N.bind("postFixed.ScrollToFixed",ad.options.postFixed)}if(ad.options.preUnfixed){N.bind("preUnfixed.ScrollToFixed",ad.options.preUnfixed)}if(ad.options.postUnfixed){N.bind("postUnfixed.ScrollToFixed",ad.options.postUnfixed)}if(ad.options.preAbsolute){N.bind("preAbsolute.ScrollToFixed",ad.options.preAbsolute)}if(ad.options.postAbsolute){N.bind("postAbsolute.ScrollToFixed",ad.options.postAbsolute)}if(ad.options.fixed){N.bind("fixed.ScrollToFixed",ad.options.fixed)}if(ad.options.unfixed){N.bind("unfixed.ScrollToFixed",ad.options.unfixed)}if(ad.options.spacerClass){R.addClass(ad.options.spacerClass)}N.bind("resize.ScrollToFixed",function(){R.height(N.height())});N.bind("scroll.ScrollToFixed",function(){N.trigger("preUnfixed.ScrollToFixed");ae();N.trigger("unfixed.ScrollToFixed");Y()});N.bind("detach.ScrollToFixed",function(c){U(c);N.trigger("preUnfixed.ScrollToFixed");ae();N.trigger("unfixed.ScrollToFixed");b(window).unbind("resize.ScrollToFixed",V);b(window).unbind("scroll.ScrollToFixed",O);N.unbind(".ScrollToFixed");R.remove();ad.$el.removeData("ScrollToFixed")});V()};ad.init()};b.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1000,baseClassName:"scroll-to-fixed-fixed"};b.fn.scrollToFixed=function(a){return this.each(function(){(new b.ScrollToFixed(this,a))})}})(jQuery);var ReplyButton=Class.$extend({__init__:function(){this.el=$("#reply-btn-id");if(!this.el){return}this.is_reply_mod=!this.el.parent().hasClass("__hidden");this.initRepliedControl()},initRepliedControl:function(){this.repliedEl=$("#replied-id");this.replyText=this.repliedEl.find("textarea");this.sendBtn=this.repliedEl.find(".replied-btn.send");this.cancelBtn=this.repliedEl.find(".replied-btn.cancel");this.file_upload=this.repliedEl.find("div.file_upload input[type=file]");autosize(this.replyText);this.el.click(function(b){this.changeMode()}.bind(this));if(location.hash=="#apply"){this.changeMode()}this.cancelBtn.click(function(b){this.changeMode()}.bind(this));this.file_upload.change(function(b){if(!$(this).hasExtension([".doc",".docx",".pdf",".odt",".rtf",".txt",".wps",".pages",".png",".jpg",".jpeg"])){alert("Прикрепить резюме можно только в форматах .doc, .docx, .pdf, .odt, .rtf, .txt, .wps, .pages, .png, .jpg");this.value=""}});this.sendBtn.click(function(b){this.sendBtn.prop("disabled",true);this.repliedEl.addClass("loading").submit()}.bind(this))},changeMode:function(){if(this.is_reply_mod){this.repliedEl.removeClass("__hidden");this.is_reply_mod=false;this.el.parent().addClass("__hidden");location.hash="apply";if($("html").is(".is_desktop")){this.replyText.focus()}$("html, body").animate({scrollTop:$("#replied-id").offset().top},1000)}else{this.repliedEl.addClass("__hidden");this.is_reply_mod=true;this.el.parent().removeClass("__hidden");location.hash="";this.sendBtn.prop("disabled",false)}}});$.fn.hasExtension=function(b){return(new RegExp("("+b.join("|").replace(/\./g,"\\.")+")$","i")).test($(this).val())};