var ukrainian=ruavars.ukrainian||false;var EMAIL_WATERMARK="Ваш e-mail";var EMAIL_WATERMARK_NAME=ukrainian?"Ваше ім'я":"Ваше имя";var WRONG_EMAIL_MESSAGE=ukrainian?"Некоректна електронна адреса":"Некорректный электронный адрес";var EMPTY_EMAIL_MESSAGE=ukrainian?"Введіть ваш e-mail":"Введите ваш e-mail";var WRONG_LOGIN_MESSAGE=ukrainian?"Некоректна адреса":"Некорректный адрес";var WRONG_PASSWORD_MESSAGE=ukrainian?"Введіть пароль":"Введите пароль";var WRONG_FILE_FORMAT=ukrainian?"Формат файлу має бути – doc, docx, rtf, txt, odt, pdf":'Формат файла должен быть – doc, docx, rtf, txt, odt, pdf';var FILE_NAME_TOOLONG=ukrainian?"Дуже довга назва файлу. Допускається не більше 64 символів":'Очень длинное имя файла. Допускается не более 64 символов';var apply_errors=new Array();var cq_error=false;jQuery(document).ready(function($){jQuery('.resume_file').change(function(){$('.attach_list').find(':radio').prop('checked','');});jQuery('.attach_list').change(function(){resetFormElement($('.resume_file'));});});function SetBottomValidationControlStyle(errHolder,errMessage,isValid){var divErrorHolder=document.getElementById(errHolder);divErrorHolder.className=(isValid)?'':'notValid';}
function VacancyApplyFormLoginValidationFunction(source,arguments){arguments.IsValid=ValidateLogin();}
function VacancyApplyFromEMailValidationFunction(source,arguments){arguments.IsValid=ValidateFromEMail();}
function validateDiv(div,holder,hdn){var result=false;var questId=div.id.substr(6);var items=div.getElementsByTagName("select");result=true;for(var i=0;i<items.length;i++){var fl=((items[i].value!='')&&(items[i].value!='0'));result=result&&(fl);if(fl)hdn.value=hdn.value+','+questId+'-'+items[i].value;}
return result;}
function populateQC(holder,hdnValue){var dv=document.getElementById(holder);if(dv==null)return true;var answers=hdnValue.split(',');for(var i=0;i<answers.length;i++){if(answers[i]=="")continue;var ids=answers[i].split('-');var items=dv.getElementsByTagName("div");for(var j=0;j<items.length;j++){if(items[j].id=='cqitem'+ids[0]){setCQDivValue(items[j],holder,ids[1]);break;}}}}
function setCQDivValue(div,holder,value){var items=div.getElementsByTagName("select");result=true;for(var i=0;i<items.length;i++){items[i].value=value;}}
function hideTabs(){hideControlById('tabOne');hideControlById('tabThree');hideControlById('dynProfileExperience');document.getElementById('link1').className='';document.getElementById('link3').className='';}
function r2switchTab(index){if(!document.getElementById('tabOne'))return;hideTabs();CurrentActiveTab=index;var currTab;var activeLink;switch(index){case 0:currTab=document.getElementById('tabOne');activeLink=document.getElementById('link1');document.getElementById('tabs1').checked=true;showControlById('dynProfileExperience');break;case 2:currTab=document.getElementById('tabThree');activeLink=document.getElementById('link3');document.getElementById('tabs3').checked=true;break;}
activeLink.className='cvpaper_tab_active';$(activeLink).closest('ul').find('li').removeClass('-activetab');$(activeLink).closest('li').addClass('-activetab');if(activeLink.id==='link3'){$('.f-apply-cv-container').addClass('my-cv-at-site');}else{$('.f-apply-cv-container').removeClass('my-cv-at-site');}
currTab.style.visibility='visible';currTab.style.display='block';VacancyApplyFromResumeActiveTabChanged(index);jQuery('.jq_additional_questions_tip').toggle(jQuery('#dynProfileExperience:visible').size()==1);}
function populateLangQC(langIds){populateQC('dvLangCQ',langIds);}
function populateExpQC(expIds){populateQC('dvExpCQ',expIds);}
function ValidateCvList(){var cntr=jQuery('.rdBtnLstResumeList').find(':input:checked');result=cntr&&cntr.length>0
SetBottomValidationControlStyle('divUploadResumeErrorBoxOuter',ukrainian?'Необхідно вибрати резюме':'Необходимо выбрать резюме',result);if(!result){if(ValidateLogin())
apply_errors.push(ukrainian?'Необхідно вибрати резюме':'Необходимо выбрать резюме');else
apply_errors.push(ukrainian?'Авторизуйтесь, щоб використати резюме з вашого блокноту':'Авторизируйтесь, чтобы использовать резюме из вашего блокнота');window.scroll(0,document.getElementById('apply').offsetTop);}
return result;}
function ResumePathValidationFunction(){var cntr=jQuery('.resume_file').get(0);var message='';var result=/((\.doc)|(\.docx)|(\.pdf)|(\.rtf)|(\.txt)|(\.odt))$/i.test(cntr.value);message=result?'':WRONG_FILE_FORMAT;var purename=cntr.value;purename=purename.indexOf('\\')>=0?purename.substring(purename.lastIndexOf('\\')):purename;var validationResult=result&&(cntr.value!="");var activeTabIndex=CurrentActiveTab;var valid=validationResult;if(activeTabIndex!=0)valid=true;SetBottomValidationControlStyle('divUploadResumeErrorBoxOuter',message,validationResult);if(!validationResult){jQuery('#spnUploadResumeErrorBox').html(message);window.scroll(0,document.getElementById('apply').offsetTop);apply_errors.push(ukrainian?'Виберіть файл з резюме':'Выберите файл с резюме');jQuery('.resume_file').change(ValidatePage);}
return valid;}
function ValidateFromEMail(){var eMailControl=jQuery(".txFromEMail").get(0);eMailControl.value=Trim(eMailControl.value);if((eMailControl.value.length==0)||(eMailControl.value==EMAIL_WATERMARK)){SetValidationControl('divVacancyApplyFromEMailErrorBox',EMPTY_EMAIL_MESSAGE,false);apply_errors.push(EMPTY_EMAIL_MESSAGE);return false;}
else{var isValid=/^[\w-]+([\.-]+?\w+)*@\w+([\.-]+?\w+)*(\.\w{2,12})+$/.test(eMailControl.value);SetValidationControl('divVacancyApplyFromEMailErrorBox',WRONG_EMAIL_MESSAGE,isValid);if(!isValid)apply_errors.push(WRONG_EMAIL_MESSAGE);return isValid;}}
function VacancyApplyNameValidationFunction(source,arguments){var fromName=jQuery(".txtNameApply").val();fromName=Trim(fromName);var result=(fromName.length>0)&&(fromName!=EMAIL_WATERMARK_NAME);var msg=ukrainian?"Введіть ваше ім'я":'Введите ваше имя';SetValidationControl('divVacancyApplyFromNameErrorBox',msg,result);if(arguments)arguments.IsValid=result;if(!result)apply_errors.push(msg);return result;}
function VacancyApplySurNameValidationFunction(source,arguments){var fromName=jQuery(".txtSurName").val();fromName=Trim(fromName);var result=(fromName.length>0)&&(fromName!=EMAIL_WATERMARK_NAME);var msg=ukrainian?'Введіть ваше прізвище':'Введите вашу фамилию';SetValidationControl('divVacancyApplySurNameErrorBox',msg,result);if(arguments)arguments.IsValid=result;if(!result)apply_errors.push(msg);return result;}
function VacancyApplyControlQuestionValidationFunction(source,arguments){var valid1=validateCQ('dvExpCQ');var valid2=validateCQ('dvLangCQ');arguments.IsValid=valid1&&valid2;if(document.getElementById("dvLangCQ"))
SetBottomValidationControlStyle("dvLangCQ","",valid2);}
function validateCQ(holder){var hdn;if(holder=='dvExpCQ')hdn=jQuery('.hdnExpCQ').find(':hidden').get(0);if(holder=='dvLangCQ')hdn=jQuery('.hdnLangCQ').find(':hidden').get(0);hdn.value='';var result=true;var dv=document.getElementById(holder);if(dv==null)return true;var items=dv.getElementsByTagName("div");for(var i=0;i<items.length;i++){if(items[i].id.indexOf('cqitem')==0){var valid=validateDiv(items[i],holder,hdn);result=valid&&result;if(holder=='dvExpCQ'){jQuery('#dvExpCQ .f-input select').each(function(index,select){SetValidationControl($(select).closest('.f-input').attr('id'),vh.msg.required,$(select).val()!='0');});}}
if(holder=='dvLangCQ'){jQuery('#dvLangCQ .f-input select').each(function(index,select){SetValidationControl($(select).closest('.f-input').attr('id'),vh.msg.required,$(select).val()!='0');});}}
if(!result&&!cq_error){apply_errors.push(ukrainian?'Необхідно відповісти на контрольне запитання':'Необходимо ответить на контрольный вопрос');cq_error=true;}
return result;}
function VacancyApplyFromResumeActiveTabChanged(activeIndex){jQuery('.hdnFldActivePage').find(':hidden').val(activeIndex);var cntr=jQuery('.resume_file').get(0);switch(activeIndex){case 0:var result=/((\.doc)|(\.docx)|(\.pdf)|(\.rtf)|(\.txt)|(\.odt))$/i.test(cntr.value);var validationResult=result;if(!validationResult){jQuery('#spnUploadResumeErrorBox').html(WRONG_FILE_FORMAT);apply_errors.push(WRONG_FILE_FORMAT);}
break;case 1:cntr.disabled=true;break;case 2:cntr.disabled=false;if(jQuery(".pnlLogin")!=null)jQuery(".txtLogin").focus();break;}}
function showSendResumeError(errorContainer,errorTextContainer,error,oversize){if(errorContainer.indexOf('UserRegion')!=-1)
document.getElementById('regholder').style.background='#FFE6D9';jQuery('#'+errorContainer).attr('class','notValid');jQuery('#'+errorTextContainer).html(error);window.scroll(0,document.getElementById('apply').offsetTop);if(oversize)_gaq.push(['_trackPageview','/cvapply_oversize']);}
function ValidateLogin(){var loginControl=jQuery(".txtLogin").get(0);if(typeof(loginControl)=='undefined'){return true;}
var passControl=jQuery(".txtPassword").get(0);loginControl.value=Trim(loginControl.value);var correct=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i.test(loginControl.value);var isValid=(loginControl.value.length>0)&&correct;var passValid=(passControl.value.length>0);var errorBox=jQuery(".lblLoginErrorBox").get(0);SetValidationControl('divApplyLogin',WRONG_LOGIN_MESSAGE,isValid);SetValidationControl('divApplyPassword',WRONG_PASSWORD_MESSAGE,passValid);return isValid&&passValid;}
function DisableEnterApply(){disableEnt(jQuery('.txBxFromName').get(0));disableEnt(jQuery('.txFromEMail').get(0));disableEnt(jQuery('.txtLogin').get(0));disableEnt(jQuery('.txtPassword').get(0));}
function ValidateAgreement(){if(!jQuery('#chkAgree').prop('checked')){SetValidationControl('dvAgreement',ukrainian?'Підтвердить згоду з правилами щоб надіслати резюме':'Подтвердите согласие с правилами чтобы отправить резюме',false);jQuery('#chkAgree').change(ValidateAgreement);apply_errors.push(ukrainian?'Підтвердить згоду з правилами щоб надіслати резюме':'Подтвердите согласие с правилами чтобы отправить резюме');return false;}
SetValidationControl('dvAgreement',ukrainian?'Підтвердить згоду з правилами щоб надіслати резюме':'Подтвердите согласие с правилами чтобы отправить резюме',true);return true;}
function ValidatePage(btn){apply_errors=new Array();cq_error=false;if(!ValidateAgreement()){DisplayErrors();return false;}
var result=true;var cv_valid=false;if(CurrentActiveTab==0)cv_valid=LastAttachValid()||ResumePathValidationFunction();else cv_valid=ValidateCvList();result=result&&cv_valid;var resultemail=ValidateFromEMail();var resultname=VacancyApplyNameValidationFunction();var resultsurname=VacancyApplySurNameValidationFunction();resultemail=resultemail&&resultname&&resultsurname;if(!resultemail){jQuery('.contactsView, .contactsForm').toggle();}
if(!resultemail)window.scrollTo(0,jQuery('#divVacancyApplyFromEMailErrorBox').offset().top);result=result&&resultemail;var resultcq1=validateCQ('dvExpCQ');if(!resultcq1&&result)window.scrollTo(0,jQuery('#dvExpCQ').offset().top);result=resultcq1&&result;var resultcq2=validateCQ('dvLangCQ');if(!resultcq2&&result)window.scrollTo(0,jQuery('#dvLangCQ').offset().top);result=resultcq2&&result;if(CurrentActiveTab==0&&(typeof(OnApplyProfileExperienceValidate)==='function')){var expValid=OnApplyProfileExperienceValidate();if(result&&!expValid)window.scrollTo(0,jQuery('#dynProfileExperience').offset().top);if(!expValid)apply_errors.push(ukrainian?'Доповніть дані про останні місця роботи':'Дополните данные о последних местах работы');result=result&&expValid;}
if(typeof grecaptcha!=='undefined'&&typeof grecaptcha.getResponse==='function'&&document.querySelectorAll('.g-recaptcha').length){var captcha=grecaptcha.getResponse();if(captcha.length==0){_gaq.push(['_trackEvent','apply_form','recaptcha']);apply_errors.push(ukrainian?'Запрос не прошел валидацию ReCaptcha':'Запрос не прошел валидацию ReCaptcha');result=false;}}
if(!result){DisplayErrors();}
else HideErrors();if(result){var trpage=jQuery('.ckhMail :input').prop('checked')?"apply_and_alert":"apply";if(typeof(analyze_email)=='function')analyze_email(jQuery(".txFromEMail").val(),trpage,true);try{if(typeof($(btn).prop('href'))!='undefined')_gaq.push(['_trackEvent','apply','confirm']);}catch(e){}}
if(result){if(CurrentActiveTab==0){if(LastAttachValid())
_gaq.push(['_trackEvent','apply_form','save_cv']);else
_gaq.push(['_trackEvent','apply_form','attach_cv']);}
else{_gaq.push(['_trackEvent','apply_form','prof_cv']);}}
return result;}
function LastAttachValid(){return $('.attach_list').find(':radio:checked').length==1;}
function DisplayErrors(){jQuery('.chr_error').show();jQuery('.errorsummary').html('');for(var i=0;i<apply_errors.length;i++){var span=jQuery('<span></span>');span.html(apply_errors[i]);span.css('display','block');span.attr('class','rua-p-c-error');span.appendTo(jQuery('.errorsummary'));}
jQuery('.errorsummary').toggle(apply_errors.length>0);}
function HideErrors(){jQuery('.chr_error').hide();jQuery('.errorsummary').hide();}
function setUserAgreement(){var name=jQuery('.txtName').val()+' '+jQuery('.txtSurName').val()
if(name&&name!='')name=', '+name+', ';name=replaceAll('<','',name);name=replaceAll('>','',name);jQuery('.spUserName').html(name);}
function replaceAll(find,replace,str){return str.replace(new RegExp(find,'g'),replace);}
function OpenAgreeDialog(){jQuery('#dlg').dialog({appendTo:'form',title:'Угода користувача',width:600});jQuery('#dlg').dialog('open');}
function settips(chk){if(chk.checked)
jQuery('.mail_tip').hide();else
jQuery('.mail_tip').show();}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
function aggregatorPopup(){if(!readCookie('aggpopup')&&!jQuery('.ui-dialog').is(':visible')){jQuery('#aggregatorPopup').dialog({appendTo:'form',width:500,autoOpen:true,dialogClass:'without-title',close:function(){createCookieMinutes('aggpopup','1',7*24*60);}});jQuery('.ui-widget-overlay').on('click',function(){$('.ui-dialog-content:visible').dialog('close')});}}
function notaggregatorPopup(){if(!readCookie('notaggpopup')&&!jQuery('.ui-dialog').is(':visible')){jQuery('#notaggregatorPopup').dialog({appendTo:'form',width:500,autoOpen:true,modal:true,dialogClass:'without-title',close:function(){createCookieMinutes('notaggpopup','1',7*24*60);}});jQuery('.ui-widget-overlay').on('click',function(){$('.ui-dialog-content:visible').dialog('close')});}}
function validateAggregatorEmail(mode){var email=mode==1?jQuery('#aggregatorPopup').find(':text').val():jQuery('#notaggregatorPopup').find(':text').val();var res=true;var msg='';if(email==''){res=false;msg=vh.msg.required;}
else if(!vh.isValid.emailfull(email)){res=false;msg=vh.msg.wrong_format;}
SetValidationControl('dvPopupEmail',msg,res);if(res&&mode==1)_gaq.push(['_trackEvent','pop_up_aggregator','confirm']);if(res&&mode==2)_gaq.push(['_trackEvent','pop_up_vac_new_visitors','confirm']);return res;}
function attach_popup(url){$('.attach_popup_holder').html('');$('.attach_popup_holder').load(url);jQuery('.attach_popup_holder').dialog({appendTo:'form',resizable:false,draggable:false,modal:true,autoOpen:true,width:800,});}
function resetFormElement(e){e.wrap('<form>').closest('form').get(0).reset();e.unwrap();if(typeof(e.stopPropagation)=='function')e.stopPropagation();if(typeof(e.preventDefault)=='function')e.preventDefault();}