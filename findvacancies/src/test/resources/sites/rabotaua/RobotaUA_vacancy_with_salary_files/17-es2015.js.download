(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{pkFk:function(t,e,n){"use strict";n.r(e),n.d(e,"EmployerFeaturePlushkiModule",(function(){return D}));var i=n("Ghnd"),s=n("bdfG"),a=n("An66"),o=n("qbo1"),c=n("D407"),l=n("+OD8"),r=n("+6xv"),d=n("C05f"),p=n("ZTXN"),b=n("HM3f"),h=n("8lHc"),u=n("jIqt"),g=n("kuMc"),m=function(t){return t.list="list",t.single="single",t}({});const w=[{id:0,ru:"\u044f\u043d\u0432\u0430\u0440\u044f",ua:"\u0441\u0456\u0447\u043d\u044f"},{id:1,ru:"\u0444\u0435\u0432\u0440\u0430\u043b\u044f",ua:"\u043b\u044e\u0442\u043e\u0433\u043e"},{id:2,ru:"\u043c\u0430\u0440\u0442\u0430",ua:"\u0431\u0435\u0440\u0435\u0437\u043d\u044f"},{id:3,ru:"\u0430\u043f\u0440\u0435\u043b\u044f",ua:"\u043a\u0432\u0456\u0442\u043d\u044f"},{id:4,ru:"\u043c\u0430\u044f",ua:"\u0442\u0440\u0430\u0432\u043d\u044f"},{id:5,ru:"\u0438\u044e\u043d\u044f",ua:"\u0447\u0435\u0440\u0432\u043d\u044f"},{id:6,ru:"\u0438\u044e\u043b\u044f",ua:"\u043b\u0438\u043f\u043d\u044f"},{id:7,ru:"\u0430\u0432\u0433\u0443\u0441\u0442\u0430",ua:"\u0441\u0435\u0440\u043f\u043d\u044f"},{id:8,ru:"\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f",ua:"\u0432\u0435\u0440\u0435\u0441\u043d\u044f"},{id:9,ru:"\u043e\u043a\u0442\u044f\u0431\u0440\u044f",ua:"\u0436\u043e\u0432\u0442\u043d\u044f"},{id:10,ru:"\u043d\u043e\u044f\u0431\u0440\u044f",ua:"\u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434"},{id:11,ru:"\u0434\u0435\u043a\u0430\u0431\u0440\u044f",ua:"\u0433\u0440\u0443\u0434\u043d\u044f"}];var f=function(t){return t.opened="opened",t.closed="closed",t}({}),x={plushki:"\u041f\u043b\u044e\u0448\u043a\u0438",newSingle:"\u041d\u043e\u0432\u0430\u044f \xab\u043f\u043b\u044e\u0448\u043a\u0430\xbb \u0434\u043b\u044f \u0432\u0430\u0441!",newList:"\u041d\u043e\u0432\u044b\u0435 \xab\u043f\u043b\u044e\u0448\u043a\u0438\xbb \u0434\u043b\u044f \u0432\u0430\u0441!",allPlushki:"\u0412\u0441\u0435 \u043f\u043b\u044e\u0448\u043a\u0438",more:"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435"},O={plushki:"\u041f\u043b\u044e\u0448\u043a\u0438",newSingle:"\u041d\u043e\u0432\u0430 \xab\u043f\u043b\u044e\u0448\u043a\u0430\xbb \u0434\u043b\u044f \u0432\u0430\u0441!",newList:"\u041d\u043e\u0432\u0456 \xab\u043f\u043b\u044e\u0448\u043a\u0438\xbb \u0434\u043b\u044f \u0432\u0430\u0441!",allPlushki:"\u0423\u0441\u0456 \u043f\u043b\u044e\u0448\u043a\u0438",more:"\u0414\u0456\u0437\u043d\u0430\u0442\u0438\u0441\u044f \u0431\u0456\u043b\u044c\u0448\u0435"},v=n("kZht");const k="@employer/feature-plushki";let y=(()=>{class t extends(Object(s.b)()){constructor(t){t.addWithPrefix(k,"uk",O),t.addWithPrefix(k,"ru",x),super(),Object.assign(this,Object(s.e)(k,O))}}return t.\u0275fac=function(e){return new(e||t)(v.gc(s.d))},t.\u0275prov=v.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var j=n("6uGs");let E=(()=>{class t{constructor(t,e){this.el=t,this.renderer=e,this.descriptionText=[]}getCurrentElementBottomEdge(){return this.el.nativeElement.clientHeight+this.el.nativeElement.offsetTop}getCurrentElementParentBottomEdge(){return this.el.nativeElement.parentElement.clientHeight+this.el.nativeElement.parentElement.offsetTop}ngAfterViewInit(){if(this.renderer.setStyle(this.el.nativeElement,"display","block"),this.getCurrentElementBottomEdge()>this.getCurrentElementParentBottomEdge()){let t=0;this.descriptionText=this.el.nativeElement.innerHTML.split(""),this.el.nativeElement.innerHTML="";for(let e=0;e<this.descriptionText.length;e++)this.getCurrentElementBottomEdge()<=this.getCurrentElementParentBottomEdge()&&(this.el.nativeElement.innerHTML+=this.descriptionText[e],t=e);this.el.nativeElement.innerHTML=this.descriptionText.slice(0,t).join("").slice(0,-3)+"..."}}}return t.\u0275fac=function(e){return new(e||t)(v.Wb(v.l),v.Wb(v.F))},t.\u0275dir=v.Rb({type:t,selectors:[["","alliancePlushkiTextOverflowEllipsis",""]]}),t})();var C=n("N1y6");const S=function(t){return{"background-image":t}};function P(t,e){if(1&t){const t=v.dc();v.cc(0,"div",12),v.Xb(1,"div",13),v.cc(2,"div",14),v.cc(3,"div",15),v.cc(4,"h3",16),v.Wc(5),v.bc(),v.cc(6,"p",17),v.Wc(7),v.bc(),v.bc(),v.cc(8,"a",18),v.kc("click",(function(){return v.Lc(t),v.oc(3).saveWatchTimestamp()})),v.Wc(9),v.pc(10,"translate"),v.bc(),v.cc(11,"button",19),v.kc("click",(function(){return v.Lc(t),v.oc(3).enableListView()})),v.Wc(12),v.pc(13,"translate"),v.bc(),v.bc(),v.bc()}if(2&t){const t=v.oc().ngIf,e=v.oc(2);v.Hb(1),v.wc("ngStyle",v.Bc(10,S,"url("+(null==t?null:t.jetpack_featured_media_url)+")")),v.Hb(4),v.Yc(" ",null==t?null:t.title.rendered," "),v.Hb(2),v.Yc(" ",e.formatDescription(null==t?null:t.excerpt.rendered)," "),v.Hb(1),v.xc("href",null==t?null:t.link,v.Oc),v.Hb(1),v.Yc(" ",v.qc(10,6,e.translations.more)," "),v.Hb(3),v.Yc(" ",v.qc(13,8,e.translations.allPlushki)," ")}}function $(t,e){if(1&t){const t=v.dc();v.cc(0,"div",20),v.cc(1,"div",21),v.cc(2,"span",22),v.Wc(3),v.bc(),v.cc(4,"a",23),v.kc("click",(function(){return v.Lc(t),v.oc(3).saveWatchTimestamp()})),v.Wc(5),v.bc(),v.bc(),v.Xb(6,"div",24),v.bc()}if(2&t){const t=e.$implicit,n=v.oc(3);v.Hb(3),v.Yc(" ",n.formatDate(null==t?null:t.date)," "),v.Hb(1),v.xc("href",null==t?null:t.link,v.Oc),v.Hb(1),v.Yc(" ",null==t?null:t.title.rendered," "),v.Hb(1),v.wc("ngStyle",v.Bc(4,S,"url("+(null==t?null:t.jetpack_featured_media_url)+")"))}}const _=function(t,e){return{"santa-left-0":t,"santa-opacity-0 santa-invisible":e}},M=function(t){return{"santa-visible":t}};function T(t,e){if(1&t){const t=v.dc();v.cc(0,"div"),v.cc(1,"button",1),v.kc("click",(function(){return v.Lc(t),v.oc(2).open()})),v.pc(2,"async"),v.pc(3,"async"),v.cc(4,"span",2),v.Wc(5),v.pc(6,"translate"),v.pc(7,"translate"),v.bc(),v.Xb(8,"img",3),v.bc(),v.cc(9,"div"),v.kc("@modalStateAnimation.done",(function(e){return v.Lc(t),v.oc(2).modalStateAnimationEnd(e)})),v.cc(10,"div",4),v.cc(11,"div",5),v.cc(12,"h3",6),v.Wc(13),v.pc(14,"translate"),v.bc(),v.cc(15,"button",7),v.kc("click",(function(){return v.Lc(t),v.oc(2).close()})),v.Wc(16,"\xa0"),v.bc(),v.bc(),v.cc(17,"div"),v.Uc(18,P,14,12,"div",8),v.cc(19,"div",9),v.pc(20,"async"),v.cc(21,"div",10),v.Uc(22,$,7,6,"div",11),v.bc(),v.bc(),v.bc(),v.bc(),v.bc(),v.bc()}if(2&t){const t=v.oc().ngIf,e=v.oc();v.Hb(1),v.wc("ngClass",v.Cc(22,_,v.qc(2,10,e.slideRight$)||t.isModalOpened,v.qc(3,12,e.isFaded$))),v.Hb(4),v.Yc(" ",t.viewState===e.ViewState.list?v.qc(6,14,e.translations.plushki):v.qc(7,16,e.translations.newSingle)," "),v.Hb(4),v.wc("@modalStateAnimation",t.modalState),v.Hb(1),v.Nb("opened",t.isModalOpened),v.Hb(3),v.Yc(" ",v.qc(14,18,e.translations.newList)," "),v.Hb(4),v.wc("@stateChangeAnimation",t.viewState),v.Hb(1),v.wc("ngIf",t.viewState===e.ViewState.single),v.Hb(1),v.wc("ngClass",v.Bc(25,M,v.qc(20,20,e.listVisibility$))),v.Hb(3),v.wc("ngForOf",e.posts)}}function W(t,e){if(1&t&&(v.ac(0),v.Uc(1,T,23,27,"div",0),v.Zb()),2&t){const t=e.ngIf;v.Hb(1),v.wc("ngIf",t.newPost)}}const H=function(t,e,n,i){return{newPost:t,viewState:e,modalState:n,isModalOpened:i}};let L=(()=>{class t{constructor(t,e,n,i,s,a,o){this.document=t,this.http=e,this.cookieStorage=n,this.globals=i,this.translateService=s,this.translations=a,this.transfer=o,this.LAST_VIEW_COOKIE_KEY="plushkiLastView",this.ViewState=m,this.posts=[],this.viewState$=new d.a(m.list),this.modalState$=new d.a(f.closed),this.listVisibility$=new d.a(!1),this.isModalOpened$=new d.a(!1),this.slideRight$=new d.a(!1),this.isFaded$=new d.a(!1),this.newPost$=new d.a(null),this.isVisible$=new d.a(!0),this.onDestroy$=new p.a}ngOnInit(){this.http.get(this.rssUrl()).subscribe(t=>{this.posts=t,this.createCustomEvent("newPostsCount",{newPosts:this.getNewPostsCount(),url:this.rssUrl()}),this.setViewState()}),Object(b.a)([this.transfer.subscribeTo(l.k.vacancyMediaFullscreenEnabled).pipe(Object(u.a)({isEnabled:!1})),this.transfer.subscribeTo(l.k.applyInCheckoutModeOpened).pipe(Object(u.a)({isEnabled:!1}))]).pipe(Object(g.a)(this.onDestroy$)).subscribe(([{isEnabled:t},{isEnabled:e}])=>this.isVisible$.next(!t&&!e))}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}formatDate(t){return`${new Date(t).getDate()}\n            ${w.find(({id:e})=>e===new Date(t).getMonth())["uk"===this.translateService.getCurrentLang()?"ua":"ru"]}\n            ${new Date(t).getFullYear()}`}formatDescription(t){return t.split(" &hellip; <a")[0].replace(/<[^>]*>/,"")}rssUrl(){let t="https://plushki.rabota.ua/wp-json/wp/v2/posts";switch(!0){case this.globals.isEmployer:t+="?categories=676717433";break;case this.globals.isJobSearcher:t+="?categories=676717011"}return`${t}`}createCustomEvent(t,e){const n=new CustomEvent(t,{bubbles:!0,detail:e});this.document.dispatchEvent(n)}open(){this.isModalOpened$.next(!0),this.modalState$.next(f.opened),this.listVisibility$.next(this.viewState$.getValue()===m.list)}close(){this.slideRight$.next(!1),this.modalState$.next(f.closed),this.saveWatchTimestamp(),this.setViewState()}getNewPostsCount(){return this.getLastWatchTimestamp()?this.posts.filter(t=>new Date(t.date).getTime()>this.getLastWatchTimestamp()).length:this.posts.length}enableListView(){this.listVisibility$.next(!0),this.viewState$.next(m.list)}modalStateAnimationEnd(t){"opened"===t.fromState&&(this.isFaded$.next(!0),this.isModalOpened$.next(!1),this.listVisibility$.next(!1))}setViewState(){this.checkNewPosts()?(this.viewState$.next(m.single),this.newPost$.next(this.posts[0]),this.slideBtnRight()):this.viewState$.next(m.list)}slideBtnRight(){Object(h.a)(1e4).subscribe(()=>this.slideRight$.next(!0))}saveWatchTimestamp(){const t=Date.now()+60*(new Date).getTimezoneOffset()*1e3;this.cookieStorage.setItem(this.LAST_VIEW_COOKIE_KEY,t.toString()),this.createCustomEvent("newsWereRead")}getLastWatchTimestamp(){return+this.cookieStorage.getItem(this.LAST_VIEW_COOKIE_KEY)||0}checkNewPosts(){const t=this.getLastWatchTimestamp();return!t||new Date(this.posts[0].date_gmt).getTime()>t}}return t.\u0275fac=function(e){return new(e||t)(v.Wb(a.e),v.Wb(j.b),v.Wb(c.a),v.Wb(o.n),v.Wb(s.d),v.Wb(y),v.Wb(l.r))},t.\u0275cmp=v.Qb({type:t,selectors:[["alliance-plushki-modal"]],decls:6,vars:16,consts:[[4,"ngIf"],["type","button",1,"show-news-modal",3,"ngClass","click"],[1,"santa-typo-secondary-bold"],["src","https://images.cf-rabota.com.ua/2019/06/alliance/elements/images/plushka_red.svg","alt",""],[1,"news-modal"],[1,"news-modal-header"],[1,"santa-typo-h3","santa-text-white"],["type","button",1,"close-news-modal",3,"click"],["class","santa-absolute",4,"ngIf"],[1,"news-holder",3,"ngClass"],[1,"news"],["class","santa-flex santa-mb-20",4,"ngFor","ngForOf"],[1,"santa-absolute"],[1,"new-post-image",3,"ngStyle"],[1,"santa-p-20"],[1,"new-post-text"],[1,"santa-typo-h3","santa-text-black","santa-mb-10"],["alliancePlushkiTextOverflowEllipsis","",1,"santa-typo-regular"],["target","_blank",1,"santa-block","santa-typo-regular-bold","santa-text-red-500","santa-text-center","santa-p-10","santa-mb-10","santa-rounded-5","santa-border-2","santa-border-solid","santa-border-red-500",3,"href","click"],["type","button",1,"santa-typo-regular-bold","santa-p-10","santa-cursor-pointer","santa-text-center","santa-text-red-500",3,"click"],[1,"santa-flex","santa-mb-20"],[1,"post-left-block"],[1,"santa-block","santa-typo-small","santa-text-black-500","santa-mb-10"],["target","_blank","alliancePlushkiTextOverflowEllipsis","",1,"santa-typo-regular-bold","santa-text-left","santa-text-blue-500",3,"href","click"],[1,"post-image",3,"ngStyle"]],template:function(t,e){1&t&&(v.Uc(0,W,2,1,"ng-container",0),v.pc(1,"async"),v.pc(2,"async"),v.pc(3,"async"),v.pc(4,"async"),v.pc(5,"async")),2&t&&v.wc("ngIf",v.qc(1,1,e.isVisible$)&&v.Ec(11,H,v.qc(2,3,e.newPost$),v.qc(3,5,e.viewState$),v.qc(4,7,e.modalState$),v.qc(5,9,e.isModalOpened$)))},directives:[a.t,a.q,a.s,a.w,E],pipes:[a.b,C.a],styles:[".show-news-modal[_ngcontent-%COMP%], .show-news-modal[_ngcontent-%COMP%]:focus {\n  width: auto;\n  cursor: pointer;\n  position: fixed;\n  height: 40px;\n  padding-left: 60px;\n  bottom: 30px;\n  left: -60px;\n  z-index: 10000;\n  -webkit-transition: 0.3s;\n  transition: 0.3s;\n}\n\n.show-news-modal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 20px;\n  -webkit-transition: 0.3s;\n  transition: 0.3s;\n}\n\n.show-news-modal[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  padding-left: 10px;\n  padding-right: 10px;\n  border-radius: 5px;\n  --text-opacity: 1;\n  color: #FF5252;\n  color: rgba(255, 82, 82, var(--text-opacity));\n  background-color: #f4f4f4;\n  padding-top: 3px;\n  padding-bottom: 3px;\n}\n\n.show-news-modal[_ngcontent-%COMP%]:hover {\n  left: 0;\n  -webkit-transition: 0.3s;\n  transition: 0.3s;\n}\n\n.news-modal[_ngcontent-%COMP%] {\n  position: fixed;\n  --bg-opacity: 1;\n  background-color: #fff;\n  background-color: rgba(255, 255, 255, var(--bg-opacity));\n  border-radius: 5px;\n  visibility: hidden;\n  width: 320px;\n  height: 530px;\n  box-shadow: 0 2px 40px rgba(0, 0, 0, 0.15);\n  left: 20px;\n  bottom: 90px;\n  z-index: 1000;\n}\n\n.news-modal.opened[_ngcontent-%COMP%] {\n  visibility: visible;\n  z-index: 10000;\n  left: 20px;\n}\n\n.news-modal-header[_ngcontent-%COMP%] {\n  display: -webkit-box;\n  display: flex;\n  -webkit-box-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n          align-items: center;\n  --bg-opacity: 1;\n  background-color: #303A3E;\n  background-color: rgba(48, 58, 62, var(--bg-opacity));\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n  padding-right: 10px;\n  padding-left: 20px;\n  padding-top: 5px;\n  padding-bottom: 5px;\n}\n\n.close-news-modal[_ngcontent-%COMP%], .close-news-modal[_ngcontent-%COMP%]:focus {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  background: url('https://images.cf-rabota.com.ua/2019/06/alliance/elements/icons/close-white.svg') no-repeat center;\n}\n\n\n\n.news-holder[_ngcontent-%COMP%] {\n  padding: 20px;\n  position: absolute;\n  visibility: hidden;\n  overflow: hidden;\n  height: 480px;\n  width: 320px;\n  box-sizing: border-box;\n}\n\n.news[_ngcontent-%COMP%] {\n  height: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n  width: 320px;\n}\n\n.post-left-block[_ngcontent-%COMP%] {\n  overflow: hidden;\n  width: 200px;\n  height: 80px;\n}\n\n.post-image[_ngcontent-%COMP%] {\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 80px;\n  height: 80px;\n}\n\n\n\n.new-post-text[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n  overflow: hidden;\n  width: 280px;\n  height: 140px;\n}\n\n.new-post-image[_ngcontent-%COMP%] {\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 320px;\n  height: 200px;\n}\n\n@media (max-width: 1300px) {\n  .news-modal[_ngcontent-%COMP%] {\n    height: 320px;\n  }\n\n  .news-holder[_ngcontent-%COMP%] {\n    height: 280px;\n  }\n\n  .new-post-image[_ngcontent-%COMP%] {\n    display: none;\n  }\n}"],data:{animation:[Object(r.n)("stateChangeAnimation",[Object(r.m)("list => single",[Object(r.f)([Object(r.h)(":enter",[Object(r.l)({opacity:0}),Object(r.e)("0.2s",Object(r.l)({opacity:1}))],{optional:!0}),Object(r.h)(":leave",[Object(r.l)({opacity:1}),Object(r.e)("0.2s",Object(r.l)({opacity:0}))],{optional:!0})])]),Object(r.m)("single => list",[Object(r.f)([Object(r.h)(":enter",[Object(r.l)({opacity:0}),Object(r.e)("0.2s",Object(r.l)({opacity:1}))],{optional:!0}),Object(r.h)(":leave",[Object(r.l)({opacity:1}),Object(r.e)("0.2s",Object(r.l)({opacity:0}))],{optional:!0}),Object(r.h)(".news-post",[Object(r.l)({opacity:0,transform:"translateX(50%)"}),Object(r.j)(".1s",[Object(r.e)(".2s ease-in",Object(r.g)([Object(r.l)({opacity:1,transform:"translateX(0)"})]))])],{optional:!0})])])]),Object(r.n)("modalStateAnimation",[Object(r.m)("closed => opened",[Object(r.h)(".news-modal",[Object(r.l)({opacity:0,transform:"scale(0.6)",transformOrigin:"left bottom"}),Object(r.e)("0.35s cubic-bezier(0.68, -0.55, 0.26, 1.55)",Object(r.l)({opacity:1,transform:"scale(1)",transformOrigin:"left bottom"}))],{optional:!0})]),Object(r.m)("opened => closed",[Object(r.h)(".news-modal",[Object(r.l)({opacity:1,transform:"scale(1)",transformOrigin:"left bottom"}),Object(r.e)("0.35s cubic-bezier(0.68, -0.55, 0.26, 1.55)",Object(r.l)({opacity:0,transform:"scale(0.6)",transformOrigin:"left bottom"}))],{optional:!0})])])]},changeDetection:0}),t})();var V=n("ZtZA");let D=(()=>{class t{constructor(t,e,n){this.resolver=t,this.app=e,this.injector=n}render(t){const e=new V.d(t.element.nativeElement,this.resolver,this.app,this.injector),n=new V.c(L,t,this.injector,this.resolver).attach(e);return n.changeDetectorRef.markForCheck(),n}}return t.\u0275mod=v.Ub({type:t}),t.\u0275inj=v.Tb({factory:function(e){return new(e||t)(v.gc(v.j),v.gc(v.g),v.gc(v.s))},imports:[[a.c,s.c,i.e]]}),t})()}}]);