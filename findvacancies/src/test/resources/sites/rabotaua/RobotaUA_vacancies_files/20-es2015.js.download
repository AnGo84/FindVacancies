(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{MpNG:function(e,t,s){"use strict";s.r(t),s.d(t,"JobseekerShellJaSubscriptionDesktopModule",(function(){return $}));var n=s("An66"),i=s("mmhJ"),c=s("+OD8"),r=s("Ghnd"),o=s("3cNf"),a=s("TYtr"),l=s("bdfG"),b=s("3kIJ"),u=s("cWK9"),d=s("kZht");let m=(()=>{class e{constructor(e,t){this.renderAsLazyService=e,this.iconsService=t,this.iconsService.registerIcons([i.Kb,i.E,i.Q,i.E,i.hd])}}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)(d.gc(c.l),d.gc(i.id))},imports:[[n.c,r.e,i.md,o.b,a.a,l.c,b.D,u.a],n.c,r.e,i.md,o.b,a.a,l.c,b.D]}),e})();var h=s("YtkY"),p=s("xVbo"),f=s("J+dc"),k=s("TLy2"),y=s("4e/d"),g=s("ruxD"),S=s("BwBJ"),w=s("8j5Y"),I=s("1cYH"),x=s("D407"),v=s("N3gD"),B=s("4ZBA"),E=s("or8I"),C=s("HM3f"),O=s("ROBh");let _=(()=>{class e extends I.d{constructor(e,t,s,n,i,c){super(),this.sessionStorage=e,this.localStorage=t,this.accountJobsearcherService=s,this.authService=n,this.fb=i,this.experimentService=c,this.SUBSCRIPTION_EMAIL_LS_KEY="SUBSCRIPTION_EMAIL_LS_KEY",this.sessionParamsKey="JA_SUBSCRIBE_ARRAY_PARAMS",this.sessionParamsArray=this.sessionStorage.getItem(this.sessionParamsKey),this.form=this.fb.group({email:["",[b.H.required,b.H.pattern(E.u.EMAIL_PATTERN)]]}),this.initState({experiment:this.experimentService.isInExperimentByCid([1,3,5,7,9],"jaSubscribe"),cityID:null,keyword:null,cityName:"",email:this.select("isLogged").pipe(Object(h.a)(e=>{var t;return e?null===(t=this.authService.user)||void 0===t?void 0:t.email:this.localStorage.getItem(this.SUBSCRIPTION_EMAIL_LS_KEY)||""})),pendingSubscriptionRequest:!1,successSubscribe:!1,stickyBlockModeEnabled:!1,hideStickyBlock:!1,isSubscription:!1,isLogged:this.authService.token$,showEmailInputOverlay:!1,stickyBlockAnimation:!1,successInputEmail:!1,alreadyHasSubscription:Object(C.a)([this.select("email"),this.select("cityID"),this.select("keyword")]).pipe(Object(p.a)(([e,t,s])=>void 0!==e&&null!==s&&null!==t),Object(f.a)(1),Object(k.a)(([e,t,s])=>e?this.accountJobsearcherService.jobsearcherAlertDoesUserHasSubscription({cityId:t,keywords:s,email:e}).pipe(Object(h.a)(e=>!!e),Object(y.a)(e=>(console.error(e.message),Object(O.a)(!1)))):Object(O.a)(!1)))})}get emailFormControl(){return this.form.get("email")}subscribeToAlert(){this.set({pendingSubscriptionRequest:!0});const{cityID:e,keyword:t,email:s}=this.get();this.accountJobsearcherService.jobsearcherAlertAddAlert({cityId:e,keywords:t,email:s}).pipe(Object(g.a)(()=>this.set({pendingSubscriptionRequest:!1}))).subscribe(()=>{this.successSubscribe()},e=>{console.error(e)})}submitEmailInputForm(e){null==e||e.preventDefault(),null==e||e.stopPropagation(),this.form.valid&&(this.set({email:this.form.value.email}),this.subscribeToAlert())}successSubscribe(){const{cityID:e,keyword:t,email:s}=this.get();this.localStorage.setItem(this.SUBSCRIPTION_EMAIL_LS_KEY,s),this.set({successSubscribe:!0}),this.hold(this.select("successSubscribe").pipe(Object(S.a)(3e3),Object(f.a)(1),Object(w.a)(s=>{if(s){const s=this.sessionParamsArray?JSON.parse(this.sessionParamsArray):[];this.sessionStorage.setItem(this.sessionParamsKey,JSON.stringify([{keyword:t,cityID:e},...s])),this.set({successSubscribe:!1,stickyBlockModeEnabled:!1,hideStickyBlock:!0,isSubscription:!0})}})))}}return e.\u0275fac=function(t){return new(t||e)(d.Wb(x.c),d.Wb(x.b),d.Wb(v.a),d.Wb(B.b),d.Wb(b.g),d.Wb(c.d))},e.\u0275cmp=d.Qb({type:e,selectors:[["alliance-feature-ja"]],features:[d.Eb],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})();var M=s("KTx3"),j=s("Wg7D"),A=s("gU00"),P={ja:{stickyBlockText:"\u041f\u043e\u043b\u0443\u0447\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0435 \u0432\u0430\u043a\u0430\u043d\u0441\u0438\u0438",stickyBlockTextSuccess:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0447\u0442\u0443 \u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443",btnText:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u043d\u0430 email",successText:"\u0412\u044b \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c!",inputEmailLabel:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 Email",errorMessages:{requiredField:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f",invalidFieldEmail:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0430\u0434\u0440\u0435\u0441\u0430"}}},T={ja:{stickyBlockText:"\u041e\u0442\u0440\u0438\u043c\u0443\u0439\u0442\u0435 \u043d\u043e\u0432\u0456 \u0432\u0430\u043a\u0430\u043d\u0441\u0456\u0457",stickyBlockTextSuccess:" \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043f\u043e\u0448\u0442\u0443 \u0456 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044c \u043f\u0456\u0434\u043f\u0438\u0441\u043a\u0443",btnText:"\u041e\u0442\u0440\u0438\u043c\u0443\u0432\u0430\u0442\u0438 \u043d\u0430 email",successText:"\u0412\u0438 \u043f\u0456\u0434\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c!",inputEmailLabel:"\u0412\u043a\u0430\u0436\u0456\u0442\u044c Email",errorMessages:{requiredField:"\u041f\u043e\u043b\u0435 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u043d\u044f",invalidFieldEmail:"\u041f\u043e\u043c\u0438\u043b\u043a\u043e\u0432\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0430\u0434\u0440\u0435\u0441\u0438"}}};const H="ja-subscription";let L=(()=>{class e extends(Object(l.b)()){constructor(e){e.addWithPrefix(H,"uk",T),e.addWithPrefix(H,"ru",P),super(),Object.assign(this,Object(l.e)(H,T))}}return e.\u0275fac=function(t){return new(t||e)(d.gc(l.d))},e.\u0275prov=d.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var D=s("SBQr"),N=s("X0Zl"),W=s("clzB"),Y=s("cuKV"),q=s("N1y6");function R(e,t){if(1&e){const e=d.dc();d.cc(0,"alliance-icon",5),d.kc("click",(function(){return d.Lc(e),d.oc(2).closeStickyPanel()})),d.bc()}if(2&e){const e=d.oc(2);d.Nb("show",e.state.stickyBlockAnimation),d.wc("name",e.IconCrossClose)("width",20)("inheritColor",!0)}}function U(e,t){if(1&e&&(d.ac(0),d.Wc(1),d.pc(2,"translate"),d.Zb()),2&e){const e=d.oc(3);d.Hb(1),d.Yc(" ",d.qc(2,1,e.translations.ja.stickyBlockTextSuccess)," ")}}function J(e,t){if(1&e&&(d.Wc(0),d.pc(1,"translate")),2&e){const e=d.oc(3);d.ad(" ",d.qc(1,3,e.translations.ja.stickyBlockText)," \xab",e.state.keyword,"\xbb, ",e.state.cityName," ")}}function K(e,t){if(1&e&&(d.cc(0,"div",6),d.Uc(1,U,3,3,"ng-container",7),d.Uc(2,J,2,5,"ng-template",null,8,d.Vc),d.bc()),2&e){const e=d.Ic(3),t=d.oc(2);d.Hb(1),d.wc("ngIf",t.state.successSubscribe&&!t.state.isLogged)("ngIfElse",e)}}function F(e,t){if(1&e){const e=d.dc();d.ac(0),d.cc(1,"santa-button",9),d.kc("click",(function(){return d.Lc(e),d.oc(2).subscribeButtonClickHandler()})),d.Xb(2,"alliance-icon",10),d.cc(3,"span",11),d.Wc(4),d.pc(5,"translate"),d.bc(),d.bc(),d.Zb()}if(2&e){const e=d.oc(2);d.Hb(1),d.wc("disabled",e.state.pendingSubscriptionRequest),d.Ib("data-id","ja_send_email"),d.Hb(1),d.wc("name",e.IconNotificationBellBold)("inheritColor",!0),d.Hb(2),d.Xc(d.qc(5,5,e.translations.ja.btnText))}}function z(e,t){if(1&e&&(d.cc(0,"santa-button",18),d.Xb(1,"alliance-icon",19),d.bc()),2&e){const e=d.oc(3);d.wc("mode","icon-only")("isSubmitType",!0),d.Hb(1),d.wc("name",e.IconWhiteCheckSuccessSubmitConfirm)}}function Z(e,t){if(1&e){const e=d.dc();d.ac(0),d.cc(1,"form",12),d.kc("submit",(function(t){return d.Lc(e),d.oc(2).submitEmailInputForm(t)})),d.cc(2,"santa-input",13),d.kc("submit",(function(){return d.Lc(e),d.oc(2).submitEmailInputForm()})),d.pc(3,"translate"),d.bc(),d.cc(4,"div",14),d.cc(5,"santa-error-msg",15),d.Wc(6),d.pc(7,"translate"),d.bc(),d.cc(8,"santa-error-msg",16),d.Wc(9),d.pc(10,"translate"),d.bc(),d.bc(),d.Uc(11,z,2,3,"ng-template",null,17,d.Vc),d.bc(),d.Zb()}if(2&e){const e=d.Ic(12),t=d.oc(2);d.Hb(1),d.wc("formGroup",t.form),d.Hb(1),d.xc("label",d.qc(3,10,t.translations.ja.inputEmailLabel)),d.wc("rightContent",e)("floatingLabel",!0),d.Hb(3),d.wc("checkDirty",!0)("control",t.form.get("email")),d.Hb(1),d.Yc(" ",d.qc(7,12,t.translations.ja.errorMessages.requiredField)," "),d.Hb(2),d.wc("checkDirty",!0)("control",t.form.get("email")),d.Hb(1),d.Yc(" ",d.qc(10,14,t.translations.ja.errorMessages.invalidFieldEmail)," ")}}function V(e,t){if(1&e&&(d.cc(0,"div",22),d.Wc(1),d.pc(2,"translate"),d.bc()),2&e){const e=d.oc(3);d.Hb(1),d.Yc(" ",d.qc(2,1,e.translations.ja.stickyBlockTextSuccess)," ")}}function X(e,t){if(1&e&&(d.ac(0),d.cc(1,"div",20),d.Xb(2,"alliance-icon",10),d.cc(3,"span",11),d.Wc(4),d.pc(5,"translate"),d.bc(),d.bc(),d.Uc(6,V,3,3,"div",21),d.Zb()),2&e){const e=d.oc(2);d.Hb(2),d.wc("name",e.IconCheckSuccessSubmitConfirm)("inheritColor",!0),d.Ib("data-id","submit_ja_email"),d.Hb(2),d.Xc(d.qc(5,5,e.translations.ja.successText)),d.Hb(2),d.wc("ngIf",!e.state.stickyBlockModeEnabled)}}function G(e,t){if(1&e&&(d.cc(0,"div"),d.Uc(1,R,1,5,"alliance-icon",1),d.cc(2,"div"),d.Uc(3,K,4,2,"div",2),d.cc(4,"div",3),d.Uc(5,F,6,7,"ng-container",4),d.Uc(6,Z,13,16,"ng-container",4),d.Uc(7,X,7,7,"ng-container",4),d.bc(),d.bc(),d.bc()),2&e){const e=d.oc();d.Nb("sticky-panel-wrapper",e.state.stickyBlockModeEnabled),d.Hb(1),d.wc("ngIf",e.state.stickyBlockModeEnabled),d.Hb(1),d.Nb("error",!e.emailFormControl.valid&&e.emailFormControl.dirty)("sticky-panel",e.state.stickyBlockModeEnabled)("show",e.state.stickyBlockAnimation)("reverse",e.state.successSubscribe&&!e.state.isLogged),d.Hb(1),d.wc("ngIf",e.state.stickyBlockModeEnabled),d.Hb(2),d.wc("ngIf",!e.state.showEmailInputOverlay&&!e.state.successSubscribe),d.Hb(1),d.wc("ngIf",e.state.showEmailInputOverlay&&!e.state.successSubscribe),d.Hb(1),d.wc("ngIf",e.state.successSubscribe)}}let Q=(()=>{class e extends _{constructor(e,t,s,n,c,r,o,a,l,u){super(o,l,a,s,n,u),this.document=e,this.translations=t,this._authService=s,this._fb=n,this.renderer=c,this.platform=r,this._sessionStorage=o,this._accountJobsearcherService=a,this._localStorage=l,this._experimentService=u,this.IconNotificationBellBold=i.Kb.name,this.IconCheckSuccessSubmitConfirm=i.E.name,this.IconCrossClose=i.Q.name,this.IconWhiteCheckSuccessSubmitConfirm=i.hd.name,this.SUBSCRIPTION_EMAIL_LS_KEY="SUBSCRIPTION_EMAIL_LS_KEY",this.sessionParamsKey="JA_SUBSCRIBE_ARRAY_PARAMS",this.sessionParamsArray=this._sessionStorage.getItem(this.sessionParamsKey),this.emailControl=new b.h(null,[b.H.required,b.H.email]),this.state=this.connectViewState(["isSubscription","stickyBlockModeEnabled","successSubscribe","keyword","pendingSubscriptionRequest","cityName","showEmailInputOverlay","stickyBlockAnimation","isLogged","experiment"]),this.form=this.fb.group({email:["",[b.H.required,b.H.pattern(E.u.EMAIL_PATTERN)]]}),this.platform.isBrowser&&this.hold(this.select("stickyBlockModeEnabled"),e=>{try{const t=this.document.querySelector(".f-header-fixed-wrapper"),s="-move-up-for-hide";e?this.renderer.addClass(t,s):this.renderer.removeClass(t,s)}catch(t){console.log(t)}}),this.hold(Object(C.a)([this.select("keyword"),this.select("cityID")]),([e,t])=>{e&&t&&this.sessionParamsArray&&JSON.parse(this.sessionParamsArray).find(s=>s.keyword===e&&s.cityID===t)&&this.set({stickyBlockModeEnabled:!1,hideStickyBlock:!0,isSubscription:!0})})}set keyword(e){this.set({keyword:e})}set cityID(e){this.set({cityID:e})}set cityName(e){this.set({cityName:e})}subscribeButtonClickHandler(){this.get().alreadyHasSubscription?this.successSubscribe():!this.get().isLogged||this.get().alreadyHasSubscription?this.get().isLogged||this.get().alreadyHasSubscription||this.set({showEmailInputOverlay:!0}):this.subscribeToAlert()}closeStickyPanel(){const e=this.sessionParamsArray?JSON.parse(this.sessionParamsArray):[],{keyword:t,cityID:s}=this.get();e.find(e=>e.keyword===t&&s)||this._sessionStorage.setItem(this.sessionParamsKey,JSON.stringify([{keyword:t,cityID:s},...e])),this.set({stickyBlockModeEnabled:!1,hideStickyBlock:!0})}ngAfterViewInit(){if(this.platform.isBrowser){const e=this.document.querySelector(".f-vacancylist-tablewrap");e&&this.hold(Object(M.a)(window,"scroll").pipe(Object(j.a)(10),Object(h.a)(t=>{const s=e.offsetParent.offsetTop+e.offsetTop,n=t.target.documentElement.scrollTop||this.document.body.scrollTop,{stickyBlockModeEnabled:i,hideStickyBlock:c}=this.get(),r=n>s;i!==r&&(this.set({stickyBlockModeEnabled:!c&&r}),setTimeout(()=>{this.set({stickyBlockAnimation:!c&&r})},200))})))}}}return e.\u0275fac=function(t){return new(t||e)(d.Wb(n.e),d.Wb(L),d.Wb(B.b),d.Wb(b.g),d.Wb(d.F),d.Wb(c.c),d.Wb(x.c),d.Wb(A.a),d.Wb(x.b),d.Wb(c.d))},e.\u0275cmp=d.Qb({type:e,selectors:[["alliance-js-subscription-desktop"]],inputs:{keyword:"keyword",cityID:"cityID",cityName:"cityName"},features:[d.Eb],decls:1,vars:1,consts:[[3,"sticky-panel-wrapper",4,"ngIf"],["class","sticky-panel-close",3,"name","width","inheritColor","show","click",4,"ngIf"],["class","santa-typo-regular",4,"ngIf"],[1,"subscribe-block"],[4,"ngIf"],[1,"sticky-panel-close",3,"name","width","inheritColor","click"],[1,"santa-typo-regular"],[4,"ngIf","ngIfElse"],["SuccessMessage",""],["mode","normal","type","secondary",1,"santa-block",3,"disabled","click"],[1,"santa-mr-10",3,"name","inheritColor"],[1,"santa-typo-regular-bold"],[1,"form-wrapper",3,"formGroup","submit"],["formControlName","email",3,"label","rightContent","floatingLabel","submit"],[1,"email-form-error"],["name","required",3,"checkDirty","control"],["name","pattern",3,"checkDirty","control"],["submitBtn",""],[3,"mode","isSubmitType"],[3,"name"],[1,"santa-text-green-500","santa-flex","santa-justify-end"],["class","santa-typo-additional",4,"ngIf"],[1,"santa-typo-additional"]],template:function(e,t){1&e&&d.Uc(0,G,8,15,"div",0),2&e&&d.wc("ngIf",!t.state.isSubscription&&t.state.experiment)},directives:[n.t,D.a,N.a,b.J,b.u,b.l,W.a,b.t,b.j,Y.a],pipes:[q.a],styles:[".sticky-panel[_ngcontent-%COMP%] {\n  display: -webkit-box;\n  display: flex;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  position: fixed;\n  top: 0;\n  -webkit-box-align: center;\n          align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  -webkit-box-pack: justify;\n          justify-content: space-between;\n  opacity: 0;\n  left: calc(50% - 530px);\n  height: 60px;\n  -webkit-transform: translateY(-50vh);\n          transform: translateY(-50vh);\n  -webkit-transition: -webkit-transform 0.3s ease;\n  transition: -webkit-transform 0.3s ease;\n  transition: transform 0.3s ease;\n  transition: transform 0.3s ease, -webkit-transform 0.3s ease;\n  max-width: 745px;\n  z-index: 1000;\n}\n\n.sticky-panel.show[_ngcontent-%COMP%] {\n  opacity: 1;\n  -webkit-transform: translateY(0);\n          transform: translateY(0);\n}\n\n.sticky-panel.error[_ngcontent-%COMP%]::after {\n  height: calc(100% + 25px);\n}\n\n.sticky-panel.error[_ngcontent-%COMP%]   .subscribe-block[_ngcontent-%COMP%] {\n  margin-top: 30px;\n}\n\n.sticky-panel[_ngcontent-%COMP%]::after {\n  content: '';\n  position: absolute;\n  --bg-opacity: 1;\n  background-color: #fff;\n  background-color: rgba(255, 255, 255, var(--bg-opacity));\n  top: 0;\n  height: 100%;\n  box-shadow: 0 4px 6px rgba(163, 178, 186, 0.25);\n  left: -100vw;\n  width: 300vw;\n  z-index: -1;\n}\n\n.reverse[_ngcontent-%COMP%] {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n          flex-direction: row-reverse;\n  -webkit-box-pack: end;\n          justify-content: flex-end;\n}\n\n.reverse[_ngcontent-%COMP%]   .subscribe-block[_ngcontent-%COMP%] {\n  margin-right: 20px;\n  margin-left: 0;\n}\n\n.sticky-panel-close[_ngcontent-%COMP%] {\n  position: fixed;\n  -webkit-transform: translateY(-50vh);\n          transform: translateY(-50vh);\n  -webkit-transition: -webkit-transform 0.3s ease;\n  transition: -webkit-transform 0.3s ease;\n  transition: transform 0.3s ease;\n  transition: transform 0.3s ease, -webkit-transform 0.3s ease;\n  top: 20px;\n  right: 40px;\n  cursor: pointer;\n  z-index: 1001;\n}\n\n.sticky-panel-close.show[_ngcontent-%COMP%] {\n  -webkit-transform: translateY(0);\n          transform: translateY(0);\n}\n\n.reverse.subscribe-block[_ngcontent-%COMP%] {\n  margin-right: 20px;\n  margin-left: 0;\n}\n\n.subscribe-block[_ngcontent-%COMP%] {\n  flex-shrink: 0;\n  margin-left: 55px;\n}\n\n\n\n.form-wrapper[_ngcontent-%COMP%] {\n  display: -webkit-box;\n  display: flex;\n  position: relative;\n  flex-shrink: 0;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n          flex-direction: column;\n  width: 260px;\n}\n\n.form-email[_ngcontent-%COMP%] {\n  width: 100%;\n  z-index: 1;\n}\n\n.form-btn[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 2;\n}"],changeDetection:0}),e})(),$=(()=>{class e{constructor(e){this.renderAsLazyService=e}renderDesktopBtn(e){return this.renderAsLazyService.render(e,Q)}}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)(d.gc(c.l))},imports:[[m]]}),e})()}}]);