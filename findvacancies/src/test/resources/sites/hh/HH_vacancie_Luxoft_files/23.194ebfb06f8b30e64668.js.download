(window.webpackJsonp=window.webpackJsonp||[]).push([[23,498,600,601,602,603],{1334:function(n,e,o){var a=o(16);n.exports=new a.Template({code:function(n,e,o){var a=this;return a.b(o=o||""),a.b('<div class="cian-placemarks-balloon-header">'),a.b(a.t(a.f("header",n,e,0))),a.b("&nbsp;"),a.b(a.v(a.f("headerTrl",n,e,0))),a.b("</div>"),a.b("\n"),a.fl()},partials:{},subs:{}},'<div class="cian-placemarks-balloon-header">{{{header}}}&nbsp;{{headerTrl}}</div>\n',a)},1335:function(n,e,o){var a=o(16);n.exports=new a.Template({code:function(n,e,o){var a=this;return a.b(o=o||""),a.b('<div class="cian-placemarks-balloon-content">'),a.b("\n"+o),a.s(a.f("offers",n,e,1),n,e,0,57,970,"{{ }}")&&(a.rs(n,e,(function(n,e,a){a.b('    <div class="cian-placemarks-balloon-content-offer">'),a.b("\n"+o),a.b('        <span class="cian-placemarks-balloon-content-offer-item cian-placemarks-balloon-content-offer-type">'),a.b("\n"+o),a.b("            "),a.b(a.v(a.f("offerType",n,e,0))),a.b("\n"+o),a.b("        </span>"),a.b("\n"+o),a.b('        <span class="cian-placemarks-balloon-content-offer-item cian-placemarks-balloon-content-body-price">'),a.b("\n"+o),a.b("            "),a.b(a.v(a.f("price",n,e,0))),a.b("&nbsp;"),a.b(a.v(a.d("trl.cianBodyCurrency",n,e,0))),a.b("\n"+o),a.b("        </span>"),a.b("\n"+o),a.b('        <span class="cian-placemarks-balloon-content-offer-item cian-placemarks-balloon-content-body-floor">'),a.b("\n"+o),a.b("            "),a.b(a.v(a.d("trl.cianBodyFloor",n,e,0))),a.b("&nbsp;"),a.b(a.v(a.f("floor",n,e,0))),a.b("/"),a.b(a.v(a.f("floors",n,e,0))),a.b("\n"+o),a.b("        </span>"),a.b("\n"+o),a.b('        <a href="'),a.b(a.v(a.f("url",n,e,0))),a.b('"'),a.b("\n"+o),a.b('           target="_blank"'),a.b("\n"+o),a.b('           rel="noopener noreferrer"'),a.b("\n"+o),a.b('           class="HH-CianPlacemarks-Link">'),a.b("\n"+o),a.b('            <span class="cian-placemarks-balloon-content-offer-item cian-placemarks-balloon-content-body-photo">'),a.b("\n"+o),a.b("                "),a.b(a.v(a.f("photo",n,e,0))),a.b("&nbsp;"),a.b(a.v(a.d("trl.cianBodyPhoto",n,e,0))),a.b("\n"+o),a.b("            </span>"),a.b("\n"+o),a.b("        </a>"),a.b("\n"+o),a.b("    </div>"),a.b("\n"+o)})),n.pop()),a.b("</div>"),a.b("\n"),a.fl()},partials:{},subs:{}},'<div class="cian-placemarks-balloon-content">\n{{#offers}}\n    <div class="cian-placemarks-balloon-content-offer">\n        <span class="cian-placemarks-balloon-content-offer-item cian-placemarks-balloon-content-offer-type">\n            {{offerType}}\n        </span>\n        <span class="cian-placemarks-balloon-content-offer-item cian-placemarks-balloon-content-body-price">\n            {{price}}&nbsp;{{trl.cianBodyCurrency}}\n        </span>\n        <span class="cian-placemarks-balloon-content-offer-item cian-placemarks-balloon-content-body-floor">\n            {{trl.cianBodyFloor}}&nbsp;{{floor}}/{{floors}}\n        </span>\n        <a href="{{url}}"\n           target="_blank"\n           rel="noopener noreferrer"\n           class="HH-CianPlacemarks-Link">\n            <span class="cian-placemarks-balloon-content-offer-item cian-placemarks-balloon-content-body-photo">\n                {{photo}}&nbsp;{{trl.cianBodyPhoto}}\n            </span>\n        </a>\n    </div>\n{{/offers}}\n</div>\n',a)},1336:function(n,e,o){var a=o(16);n.exports=new a.Template({code:function(n,e,o){var a=this;return a.b(o=o||""),a.b('<div class="bloko-loading bloko-loading_visible">'),a.b("\n"+o),a.b('    <span class="bloko-icon bloko-icon_loading bloko-icon_initial-primary"/>'),a.b("\n"+o),a.b("</div>"),a.b("\n"),a.fl()},partials:{},subs:{}},'<div class="bloko-loading bloko-loading_visible">\n    <span class="bloko-icon bloko-icon_loading bloko-icon_initial-primary"/>\n</div>\n',a)},1337:function(n,e,o){var a=o(16);n.exports=new a.Template({code:function(n,e,o){var a=this;return a.b(o=o||""),a.b('<div class="cian-placemarks-balloon HH-CianPlacemarks-Balloon">'),a.b("\n"+o),a.b('    <span class="cian-placemarks-balloon-close HH-CianPlacemarks-BalloonClose">'),a.b("\n"+o),a.b('        <span class="bloko-icon-dynamic">'),a.b("\n"+o),a.b('            <button class="bloko-icon-link">'),a.b("\n"+o),a.b('                <span class="bloko-icon'),a.b("\n"+o),a.b("                             bloko-icon_initial-action"),a.b("\n"+o),a.b("                             bloko-icon_highlighted-default"),a.b("\n"+o),a.b('                             bloko-icon_cancel"/>'),a.b("\n"+o),a.b("            </button>"),a.b("\n"+o),a.b("        </span>"),a.b("\n"+o),a.b("    </span>"),a.b("\n"+o),a.b('    <div class="cian-placemarks-balloon-arrow"></div>'),a.b("\n"+o),a.b('    <div class="cian-placemarks-balloon-content-wrapper">'),a.b("\n"+o),a.b("        $[[options.contentLayout observeSize maxHeight=100]]"),a.b("\n"+o),a.b("    </div>"),a.b("\n"+o),a.b("</div>"),a.b("\n"),a.fl()},partials:{},subs:{}},'<div class="cian-placemarks-balloon HH-CianPlacemarks-Balloon">\n    <span class="cian-placemarks-balloon-close HH-CianPlacemarks-BalloonClose">\n        <span class="bloko-icon-dynamic">\n            <button class="bloko-icon-link">\n                <span class="bloko-icon\n                             bloko-icon_initial-action\n                             bloko-icon_highlighted-default\n                             bloko-icon_cancel"/>\n            </button>\n        </span>\n    </span>\n    <div class="cian-placemarks-balloon-arrow"></div>\n    <div class="cian-placemarks-balloon-content-wrapper">\n        $[[options.contentLayout observeSize maxHeight=100]]\n    </div>\n</div>\n',a)},646:function(n,e,o){"use strict";o.r(e);var a=o(1272),t=["ru_RU","en_US","en_RU","ru_UA","uk_UA","tr_TR"],l=window.globalVars.country,c=window.globalVars.locale;"2"===l&&"en_RU"===c&&(c="uk_UA"),e.default=function(){return Object(a.a)({lang:t.indexOf(c)>-1?c:"ru_RU",apiKey:window.globalVars.features.ymaps_api_key||"bd2ce8bf-561f-4940-be08-6e87317d767b"}).catch((function(n){return Promise.reject(n)}))}},730:function(n,e,o){"use strict";o.r(e);var a=o(646),t=o(1334),l=o.n(t),c=o(1335),r=o.n(c),i=o(1336),s=o.n(i),b=o(1337),p=o.n(b),f=o(77),u=o(1449),d=o(21);function m(n,e){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.push.apply(o,a)}return o}function k(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?m(Object(o),!0).forEach((function(e){y(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}function y(n,e,o){return e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o,n}var g={analyticsGoalOpenBalloon:"cian_ad_open_balloon",analyticsGoalCianLinkClick:"cian_ad_cian_link_click",analyticsGoalClusterClick:"cian_ad_cluster_click",placemarkIcon:"".concat(window.globalVars.staticHost,"/i/Components/VacancyMap/cian-placemark.svg"),clusterIcon:"".concat(window.globalVars.staticHost,"/i/Components/VacancyMap/cian-cluster.svg"),placemarkIconSize:[27,36],clusterIconSize:[27,27],mapZoom:16};e.default=function(n,e){var o=k({},g,{},e),t={iconLayout:"default#image",iconImageHref:o.placemarkIcon,iconImageSize:o.placemarkIconSize,zIndex:o.placemarkZIndex},c=Math.floor(n.offsetWidth*n.offsetHeight/(t.iconImageSize[0]*t.iconImageSize[1])),i=y(),b=[15,-20],m=[-40,0];function y(){return"RUR"!==o.compensation.currencyCode?1e5:o.compensation.to?o.compensation.to:1e5}function v(n){return r.a.render({offers:n,trl:o.trl})}function h(n){switch(n){case 10:return o.trl.cianBodyBedPlace;case 9:return o.trl.cianBodyStudio;case 7:return o.trl.cianBodyFreeLayout;case 6:return o.trl.cianBodyManyRooms.replace("{}",n);default:return o.trl.cianBodyRooms.replace("{}",n)}}function _(n){n.originalRequestId=o.originalRequestId,u.a.get("/analytics",{params:n})}Object(a.default)().then((function(e){var a=new e.LoadingObjectManager("/vacancy/cian_placemarks?screen_area=".concat(c,"&priceMax=").concat(y(),"&bbox=%b"),{clusterize:!0,groupByCoordinates:!1,clusterHasHint:!1,clusterIcons:[{href:o.clusterIcon,size:o.clusterIconSize,offset:b}],clusterIconContentLayout:null,geoObjectOpenBalloonOnClick:!1,geoObjectIconLayout:t.iconLayout,geoObjectIconImageHref:t.iconImageHref,geoObjectIconImageSize:t.iconImageSize}),r=e.templateLayoutFactory.createClass(p.a.render(),{build:function(){var n=this;this.constructor.superclass.build.call(this),this._element=this.getParentElement().querySelector(".HH-CianPlacemarks-Balloon"),this._element.querySelector(".HH-CianPlacemarks-BalloonClose").addEventListener("click",(function(e){e.preventDefault(),n.events.fire("userclose")})),this.applyElementOffset()},onSublayoutSizeChange:function(){for(var n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];r.superclass.onSublayoutSizeChange.apply(this,e),this.applyElementOffset(),this.events.fire("shapechange")},applyElementOffset:function(){this._element.style.left=0,this._element.style.top="".concat(-(this._element.offsetHeight/2+b[1]),"px")},getShape:function(){var n,o,a=(null===(n=this._element)||void 0===n?void 0:n.offsetWidth)||0,t=(null===(o=this._element)||void 0===o?void 0:o.offsetHeight)||0,l={left:b[0]+m[0],top:-(t/2+b[1])+m[1]};return new e.shape.Rectangle(new e.geometry.pixel.Rectangle([[l.left,l.top],[l.left+a,l.top+t]]))}});a.objects.options.set({balloonLayout:r,balloonPanelMaxMapArea:0,hideIconOnBalloonOpen:!1,balloonOffset:b}),n.addEventListener("click",(function(n){n.target.closest(".HH-CianPlacemarks-Link")&&_({goal:o.analyticsGoalCianLinkClick,target:n.target.href})})),a.objects.events.add("click",(function(n){var e=n.get("objectId");if(function(n){return a.objects.getById(n).properties.balloonContent}(e))a.objects.balloon.open(e);else{var t=a.objects.getById(e);t.properties.balloonContent=s.a.render(),a.objects.balloon.open(e),function(n){return new Promise((function(e){u.a.post("/vacancy/cian_offers",{category:"flatRent",priceMax:i,boundedBy:{lowerCorner:{lat:n.lat-5e-5,lng:n.lng-5e-5},upperCorner:{lat:n.lat+5e-5,lng:n.lng+5e-5}}}).then((function(n){var e=n.data,a=void 0===e?{}:e;return"offerBlocks"in a?a.offerBlocks.map((function(n){var e=Object(d.a)(n.url),a=Object(d.a)();return a.search=o.utmSource,e.params=k({},e.params,{},a.params),{url:e.href,price:f.default.formatCost(n.price),offerType:h(n.room),floor:n.floor,floors:n.floors,photo:n.photo.length}})):[]})).then((function(n){var a;e({header:(a=n.length,l.a.render({header:a,headerTrl:o.trl.cianHeaderText})),body:v(n),offers:n})})).catch((function(){}))}))}({lat:t.geometry.coordinates[0],lng:t.geometry.coordinates[1]}).then((function(n){t.properties.balloonContentHeader=n.header,t.properties.balloonContentBody=n.body,a.objects.balloon.setData(t),_({goal:o.analyticsGoalOpenBalloon,offersSize:n.offers.length})}))}})),a.clusters.overlays.events.add("click",(function(n){var t=a.clusters.getById(n.get("objectId")).properties.geoObjects.map((function(n){return n.geometry.coordinates})),l=e.util.bounds.fromPoints(t),c=e.util.bounds.containsBounds(o.ymap.getBounds(),l),r=e.util.bounds.getCenter(l);_({goal:o.analyticsGoalClusterClick,needZoom:c}),c&&(o.ymap.setCenter(r,o.ymap.getZoom()+1),n.stopImmediatePropagation())}),a,200),o.ymap.geoObjects.add(a)}),console.error)}}}]);
//# sourceMappingURL=23.194ebfb06f8b30e64668.js.map